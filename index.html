<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="سفارشی‌سازی و خرید ست‌های سنگ مصنوعی با انتخاب مدل و رنگ دلخواه">
    <title>ست سنگ مصنوعی - سازنده ست</title>
    <script src="https://telegram.org/js/telegram-web-app.js?59"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<header class="fixed-header">
    <div class="header-content">
        <h1><i class="fas fa-gem"></i> ست سنگ مصنوعی</h1>
    </div>
</header>

<div class="stage-toolbar" id="stage-toolbar">
    <nav role="tablist" class="product-nav">
        <div class="nav-items-wrapper" id="nav-items-wrapper"></div>
    </nav>
</div>

<main id="main-content">
    <section class="stage welcome-stage active" id="stage-welcome">
        <img src="assets/images/welcome.png" alt="ست سنگ مصنوعی" class="welcome-image">
        <h1>به دنیای سنگ مصنوعی خوش آمدید!</h1>
        <p>ست محصولات سنگی خود را بسازید. از سینی تا مجسمه، همه چیز را انتخاب کنید و فضایی منحصر به فرد برای محیط خود ایجاد کنید.</p>
        <button class="welcome-start-btn" id="start-button">شروع ساخت ست</button>
    </section>

    <section class="stage" id="stage-review">
        <h1>بازبینی نهایی سفارش</h1>
        <p>لطفاً سفارش خود را بررسی کرده و در صورت نیاز آن را ویرایش کنید.</p>
        <table class="review-table">
            <thead>
                <tr>
                    <th>محصول</th>
                    <th>مدل</th>
                    <th>رنگ</th>
                    <th>تعداد</th>
                    <th>عملیات</th>
                </tr>
            </thead>
            <tbody id="review-tbody"></tbody>
        </table>
        <div class="stage-navigation">
            <button class="btn-secondary" onclick="app.goToPreviousStage()">بازگشت به انتخاب</button>
            <button class="btn-primary" onclick="order.submitOrder()">ارسال نهایی سفارش</button>
        </div>
    </section>
</main>

<aside role="complementary" class="sidebar-cart" id="sidebar-cart" aria-label="سبد خرید">
    <div class="sidebar-header">
        <h2><i class="fas fa-shopping-cart"></i> سبد خرید شما <button class="btn-small" onclick="ui.toggleSidebar()" aria-label="بستن سبد خرید"><i class="fas fa-times"></i></button></h2>
    </div>
    <div class="sidebar-content">
        <div class="selected-items-summary" id="selected-items-summary"></div>
    </div>
    <div class="sidebar-footer">
        <div class="total-summary">مجموع آیتم‌ها: <span id="total-items-count">0</span></div>
        <button class="btn-primary" id="final-submit-btn" onclick="product.goToReviewStage()">بازبینی و تأیید نهایی</button>
    </div>
</aside>

<button class="floating-cart-btn" onclick="ui.toggleSidebar()" aria-label="باز کردن سبد خرید" id="floating-cart-btn">
    <i class="fas fa-shopping-cart"></i>
    <span class="cart-badge" id="cart-badge">0</span>
</button>

<div id="color-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-product-name">
    <div class="modal-content">
        <h3 id="modal-product-name">انتخاب رنگ</h3>
        <div class="modal-product-preview" id="modal-product-preview">
            <div class="carousel-container" id="carousel-container">
                <div class="carousel-inner" id="carousel-inner"></div>
            </div>
            <button class="carousel-arrow left" onclick="ui.changeCarouselSlide(1)"><i class="fas fa-chevron-left"></i></button>
            <button class="carousel-arrow right" onclick="ui.changeCarouselSlide(-1)"><i class="fas fa-chevron-right"></i></button>
        </div>
        <p class="color-info">می‌توانید چند رنگ انتخاب کنید</p>
        <div class="color-options" id="color-options"></div>
        <div class="buttons">
            <button class="btn-primary" onclick="ui.confirmSelection()">تایید انتخاب</button>
            <button class="btn-secondary" onclick="ui.closeColorModal()">انصراف</button>
        </div>
    </div>
</div>

<div id="delete-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="delete-modal-title">
    <div class="modal-content">
        <h3 id="delete-modal-title">تایید حذف</h3>
        <p>آیا از حذف این محصول از سبد خرید مطمئن هستید؟</p>
        <div class="buttons">
            <button class="btn-danger btn-small" id="confirm-delete-btn" onclick="ui.confirmDelete(event)">بله، حذف شود</button>
            <button class="btn-secondary btn-small" onclick="ui.closeDeleteModal(event)">انصراف</button>
        </div>
    </div>
</div>

<script type="module" src="js/app.js"></script>
</body>
</html>
